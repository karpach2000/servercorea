<!DOCTYPE html>
<html lang="ru">

<head>

    {{>web/html/pattern/headDepend}}
    <title>30 лет</title>
</head>

<body class="mt-5" onload="toggleMenu()">

    {{>web/html/pattern/navbar}}

    <!-- Основное "тело" сайта, его упаковываем в контейнер, чтобы применить адаптивность -->
    <main role="main" class="container pt-3">
        <div class="row">
            <!-- левое дополнительное меню (внутриигровое) -->
            <div id="leftMenu" class="my-1 col-12 col-md-1">
                <div class="row">
                    <div class="col-2 col-md-12 m-3" data-toggle="tooltip" data-placement="right" title="Help">

                        <a data-toggle="modal" data-target="#help">
                            <img class="img-fluid" src="/web/images/icons/bulb.png" alt="help">
                        </a>

                    </div>
                    <div class="col-2 col-md-12 m-3" data-toggle="tooltip" data-placement="right" title="Chat">

                        <a data-toggle="modal" data-target="#chat">
                            <img class="img-fluid" src="/web/images/icons/letter.png" alt="I like it!">
                        </a>

                    </div>
                    <div class="col-2 col-md-12 m-3 d-block d-md-none" data-toggle="tooltip" data-placement="right" title="News">

                        <a data-toggle="modal" data-target="#newsSmall">
                            <img class="img-fluid" src="/web/images/icons/bell.png" alt="news">
                        </a>

                    </div>
                    <div class="col-2 col-md-12 m-3" data-toggle="tooltip" data-placement="right" title="Pattern">

                        <a data-toggle="modal" data-target="#pattern">
                            <img class="img-fluid" src="/web/images/icons/folder.png" alt="settings">
                        </a>

                    </div>
                </div>
            </div>

            <div id="leftFrame" class="my-1 col-12 col-md-3">
                <div id="startORjoin" class="border">
                    <button type="button" class="btn btn-primary btn-block btn-lg" name="createGame" id="createGame">
                        <span id='createGameLoader' class="spinner-border spinner-border-sm" role="status" aria-hidden="true" hidden></span>
                        Создать игру (и пригласить товарищей)
                    </button>

                    <button type="button" class="btn btn-secondary btn-block btn-lg" name="joinGame" id="joinGame">
                        <span id='joinGameLoader' class="spinner-border spinner-border-sm" role="status" aria-hidden="true" hidden></span>
                        Присоединиться к игре (у меня есть данные для входа)
                    </button>
                </div>

                <div id="inputID" class="border" hidden>
                    <p class="text-secondary">Совет: если перейти по ссылке от камрада, который игру создавал, то лишние циферки вводить не надо</p>
                    <form>
                        <label for="sessionId" class="col-12 col-form-label">ID сессии (до 6 цифр)</label>
                        <div class="col-12">
                            <input type="number" id="sessionId" class="form-control" min="0" max="999999" required />
                        </div>

                        <label for="sessionPas" class="col-12 col-form-label">Пароль сессии (до 6 цифр)</label>
                        <div class="col-12">
                            <input type="number" id="sessionPas" class="form-control" min="0" max="999999" required />
                        </div>
                        <br/>
                        <button type="button" class="btn btn-secondary btn-block btn-lg" name="checkID" id="checkID">
                            <span id='checkGameLoader' class="spinner-border spinner-border-sm" role="status" aria-hidden="true" hidden></span>
                            Подтвердить данные сессии
                        </button>
                    </form>
                </div>

                <div id="inputUsername" class="border" hidden>
                    <form>
                        <label for="userName" class="col-12 col-form-label">Имя пользователя</label>
                        <div class="col-12">
                            <input type="text" id="userName" size="10" class="form-control" onkeyup="this.value = this.value.replace(/[^A-Za-zА-Яа-яЁё0-9]/,'');" required placeholder="Введите отображаемое имя" />
                        </div>
                        <br/>
                        <button type="button" class="btn btn-primary btn-block btn-lg" name="addMyself" id="addMyself">
                            <span id='addGameLoader' class="spinner-border spinner-border-sm" role="status" aria-hidden="true" hidden></span>
                            Добавить себя и перейти к игре
                        </button>
                    </form>
                </div>

                <div id="userList" hidden>
                    <table class="table table-striped table-sm">
                        <thead class="thead-inverse">
                            <tr>
                                <th class="av p-0">&nbsp;</th>
                                <th>username</th>
                                <th>&nbsp;</th>
                            </tr>
                        </thead>
                        <tbody id="userTable" class="table-striped table-hover">
                            <!-- 
                            <tr>
                                <td class="av p-0">
                                    <img class="img-fluid rounded m-0" width='50px' src="/web/images/avatar/Roundicons-01.png" alt="">
                                </td>
                                <td data-toggle="tooltip" data-placement="left" title="Он типа подопытный">
                                    <a id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Петя Петров</a>
                                    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                        <a class="dropdown-item" href="#" data-toggle="tooltip" data-placement="right" title="Подсказка действия">Action</a>
                                        <a class="dropdown-item" href="#" data-toggle="tooltip" data-placement="right" title="Подсказка действия">Another action</a>
                                        <a class="dropdown-item" href="#" data-toggle="tooltip" data-placement="right" title="Подсказка действия">Something else here</a>
                                    </div>
                                </td>
                                <td>
                                    ?
                                </td>
                            </tr>
                            <tr>
                                <td class="av p-0">
                                    <img class="img-fluid rounded m-0" width='50px' src="/web/images/avatar/Roundicons-04.png" alt="">
                                </td>
                                <td data-toggle="tooltip" data-placement="left" title="Это типа ты">
                                    Вася
                                </td>
                                <td>
                                    ?
                                </td>
                            </tr>
                            <tr>
                                <td class="av p-0">
                                    <img class="img-fluid rounded m-0" width='50px' src="/web/images/avatar/Roundicons-05.png" alt="">
                                </td>
                                <td data-toggle="tooltip" data-placement="left" title="Это типа хер который с тобой играет">
                                    Гурбангулы Бердымухаммедов
                                </td>
                                <td>
                                    ?
                                </td>
                            </tr>
                            <tr>
                                <td class="av p-0">
                                    <img class="img-fluid rounded m-0" width='50px' src="/web/images/avatar/Roundicons-09.png" alt="">
                                </td>
                                <td data-toggle="tooltip" data-placement="left" title="Еще какой-то хер">
                                    Йцукенах
                                </td>
                                <td>
                                    ?
                                </td>
                            </tr> 
                            -->
                        </tbody>
                    </table>
                    <button type="button" class="btn btn-primary btn-block" name="startGame" id="startGame">
                        Начать игру
                    </button>
                    <button type="button" class="btn btn-danger btn-block" name="stopGame" id="stopGame">
                        Завершить игру
                    </button>
                    <button type="button" class="btn btn-success btn-block dropdown-toggle" name="invite" id="invite" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Пригласить друзей
                    </button>
                    <div class="dropdown-menu" aria-labelledby="invite" role="dialog">
                        <button class="dropdown-item btn-lg active" data-toggle="tooltip" data-placement="right" title="Служебное - открыть новое окно с игрой" onclick="window.open(document.getElementById('url').innerHTML)">
                            Открыть
                        </button>
                        <button class="dropdown-item btn-lg" data-toggle="tooltip" data-placement="right" title="Показать данные сессии" onclick="showAlert(document.getElementById('ses').innerHTML,'green')">
                            Показать
                        </button>
                        <button class="dropdown-item btn-lg" data-toggle="tooltip" data-placement="right" title="Скопировать в буфер обмена ссылку" onclick="copyToClipboard('url')">
                            Копировать
                        </button>
                        <button class="dropdown-item btn-lg" data-toggle="tooltip" data-placement="right" title="Скопировать в буфер обмена приглашение" onclick="copyToClipboard('inv')">
                            Послать
                        </button>
                    </div>

                </div>
            </div>

            <div id="rightFrame" class="my-1 col-12 col-md-5">

                <div id="loader" hidden>
                    <h3 class="text-secondary text-center mt-5">Наводим ракеты...</h3>
                    <div class="d-flex justify-content-center">
                        <div class="spinner-border text-secondary my-5" style="width: 10rem; height: 10rem; border: 2rem solid currentColor;border-top-color: transparent;" role="status">
                            <span class="sr-only">Loading...</span>
                        </div>
                    </div>
                </div>

                <div id='progress-div' class="progress" style="height: 50px;" hidden>
                    <div id='progress-blue' class="progress-bar progress-bar-striped progress-bar-animated bg-info" role="progressbar" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100" style="width: 75%">
                        <h3></h3>
                    </div>
                    <div id='progress-red' class="progress-bar progress-bar-striped progress-bar-animated bg-danger" role="progressbar" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100" style="width: 25%">
                        <h3></h3>
                    </div>
                </div>

                <div id="beforeGame">
                    <p class="text-muted">Это видно сразу при открытии странички, потом не видно</p>
                    <p class="text-primary">Это любимая игра людей от 25 лет и старше - придумать отмазку, чтобы никуда не идти. (здесь должно быть краткое описание игры и какой-то баннер)</p>
                    <img class="img-fluid m-0" src="/web/images/KimDance.gif" alt='Мы знаем как попасть в Америку!' />
                </div>

                <div id="inLobby" hidden>
                    <p class="text-muted">Это игроки видят до момента начала игры</p>
                    <p class="text-primary">Ждем, пока коалиция соберется и кто-то наберется храбрости начать игру. А пока вот вам человек, который знает как попасть в Америку</p>
                    <img class="img-fluid m-0" src="/web/images/KimDance.gif" alt='Мы знаем как попасть в Америку!' />
                </div>

                <div id="realExec" class="card bg-dark text-white" hidden>
                    <img src="/web/images/kimWithGirls.jpg" class="card-img" alt="..." style="opacity: 0.3;" />
                    <div class="card-img-overlay">
                        <h5 class="card-title text-center">Камрад, ахтунг!</h5>
                        <p class="card-text">
                            Тут тебя зовут посетить
                            <span id="real-exec-data" class="text-danger font-weight-bold">
                                    НЕКОЕ СОБЫТИЕ
                                </span> , а тебе идти ну очень лень.
                        </p>
                        <form onsubmit="enterRealExcute();return false">
                            <div class="form-group">
                                <label for="real-excute" class="text-warning" style="width: 100%;">Как будешь отмазываться?</label>
                                <input type="text" id="real-excute" class="form-control-lg mx-auto" onkeyup="this.value = this.value.replace(/[^A-Za-zА-Яа-яЁё\d\s]/,'');" required placeholder="Введите отмазку" style="width: 100%;" data-toggle="tooltip" data-placement="top" title="Разрешены буквы, цифры и пробелы">
                            </div>
                            <button type="submit" id="real-exec-btn" class="btn btn-block btn-primary btn-lg">Отмазаться</button>
                        </form>
                    </div>
                </div>

                <div id="falseExec" class="card bg-dark text-white" hidden>
                    <img src="/web/images/kimWithBinocular.jpg" class="card-img" alt="..." style="opacity: 0.3;" />
                    <div class="card-img-overlay">
                        <h5 class="card-title text-center">Камрад, будь бдителен!</h5>
                        <p class="card-text">
                            Тут
                            <span id="false-exec-user" class="text-danger font-weight-bold">
                                    username
                                </span> позвали посетить
                            <span id="false-exec-data" class="text-danger font-weight-bold">
                                    НЕКОЕ СОБЫТИЕ
                                </span>, а он почему-то идти не хочет.
                        </p>
                        <form onsubmit="enterFalseExcute();return false">
                            <div class="form-group">
                                <label for="false-excute" class="text-warning" style="width: 100%;">Как он будет отмазываться?</label>
                                <input type="text" id="false-excute" class="form-control-lg mx-auto" onkeyup="this.value = this.value.replace(/[^A-Za-zА-Яа-яЁё\d\s]/,'');" required placeholder="Введите отмазку" style="width: 100%;" data-toggle="tooltip" data-placement="top" title="Разрешены буквы, цифры и пробелы">
                            </div>
                            <button id="false-exec-btn" class="btn btn-block btn-primary btn-lg">Предположить отмазку</button>
                        </form>
                    </div>
                </div>

                <div id="voterFrame" hidden>
                    <h4 class="text-secondary">окно голосования</h4>
                </div>

                <div id="resultsFrame" hidden>
                    <h4 class="text-secondary">окно с результатами</h4>
                </div>
            </div>

            <div id="rightMenu" class="my-1 col-12 col-md-3 d-none d-md-block">
                {{>web/html/pattern/news}}
                <p></p>
                {{>web/html/pattern/extraInfo}}

            </div>

        </div>
    </main>


    <!-- Modal -->
    <div class="modal fade" id="help" tabindex="-1" role="dialog" aria-labelledby="helpModal" aria-hidden="true">
        <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="helpModal">Modal title (help)</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
                </div>
                <div class="modal-body">
                    {{>web/html/pattern/30yearsRules}}
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="chat" tabindex="-1" role="dialog" aria-labelledby="chatModal" aria-hidden="true">
        <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="chatModal">Modal title (chat)</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
                </div>
                <div class="modal-body">
                    <h1>Chat deploy here</h1>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="newsSmall" tabindex="-1" role="dialog" aria-labelledby="newsModal" aria-hidden="true">
        <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="newsModal">Здесь живут новости на малых экранах</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
                </div>
                <div class="modal-body">
                    {{>web/html/pattern/news}}
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="pattern" tabindex="-1" role="dialog" aria-labelledby="patternModal" aria-hidden="true">
        <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="patternModal">Modal title (chat)</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
                </div>
                <div class="modal-body">
                    <h1>Something else may be here</h1>
                    <img class="img-fluid rounded" src="/web/images/lollyBomb.jpg" alt="">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <div id="clip" hidden>
        <span id="url"></span>
        <span id="inv"></span>
        <span id="ses"></span>
    </div>
    {{>web/html/pattern/footer}} {{>web/html/pattern/footDepend}}
    <script src="/web/javascript/games/30years/dictionary.js"></script>
    <script src="/web/javascript/games/30years/webSocket.js"></script>
    <script src="/web/javascript/games/30years/actions.js"></script>
    <script src="/web/javascript/games/30years/states.js"></script>
</body>

</html>